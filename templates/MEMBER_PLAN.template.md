# Member Plan Mode 提出テンプレート

executor メンバーが Plan Mode で coordinator に提出する実行計画のテンプレートです。
Plan Mode 中は Edit/Write が使用不可のため、このテンプレートに従って調査結果と実行計画を SendMessage で coordinator に提出してください。

---

## 基本情報

| 項目 | 内容 |
|---|---|
| **提出者** | {member_name} |
| **タスクID** | {task_id} (例: T-0001) |
| **タスクタイトル** | {task_title} |
| **authority_layer** | executor |
| **θフェーズ** | {current_theta_phase} (例: execute) |
| **提出日時** | {ISO 8601 timestamp} |

---

## 1. タスク分析

### 要件の理解

タスクJSON（`.shiki/tasks/{task_id}.json`）から読み取った要件：

- **タスクの目的**: {タスクが達成すべきこと}
- **受け入れ条件**:
  - {acceptance[0]}
  - {acceptance[1]}
  - {acceptance[2]}

### 現状の調査結果

コードベースの調査から得られた知見：

- **関連するコード**: {関連するファイル/モジュールの説明}
- **既存の実装**: {現在の実装状況}
- **技術的制約**: {フレームワーク/ライブラリの制約}
- **テストの状況**: {既存テストの有無とカバレッジ}

### 契約の確認

- **参照契約**: {contract_id または「なし」}
- **契約の内容**: {API シグネチャ、型定義等の概要}
- **遵守事項**: {契約から読み取った制約}

---

## 2. 実装アプローチ

### 方針

{具体的な実装方法の説明。なぜこのアプローチを選択したか、代替案との比較があれば記載}

### 変更対象ファイル

| ファイルパス | 変更種別 | 変更内容の概要 |
|---|---|---|
| `{path/to/file1}` | 新規作成 / 修正 | {概要} |
| `{path/to/file2}` | 新規作成 / 修正 | {概要} |
| `{path/to/file3}` | 新規作成 / 修正 | {概要} |

### ファイル所有権スコープの確認

- **割当スコープ**: {タスクで割り当てられた ownership.include}
- **変更対象の適合性**: {すべての変更がスコープ内か確認}
- **スコープ外の変更が必要な場合**: {理由と coordinator への拡張申請}

### 実装ステップ

1. {ステップ1: 具体的な作業内容}
2. {ステップ2: 具体的な作業内容}
3. {ステップ3: 具体的な作業内容}
4. {テスト作成/実行}
5. {リンタ/フォーマッタ実行}

---

## 3. 依存関係とブロッカー

### 依存タスク

| タスクID | タイトル | 現在の status | 影響 |
|---|---|---|---|
| {T-YYYY} | {依存タスクのタイトル} | {status} | {何が必要か} |

### 契約依存

| contract_id | 状態 | 影響 |
|---|---|---|
| {contract-XXX} | {proposed/agreed/...} | {どの契約条項に依存するか} |

### ブロッカー

- {ブロッカーがある場合は具体的に記載}
- {ない場合は「なし」}

### 他メンバーとの調整事項

- {P2P で確認すべきことがあれば記載}
- {インターフェースの詳細、共有リソースの利用等}

---

## 4. 見積もり

### トークン見積もり

| 作業 | 推定トークン数 |
|---|---|
| 実装 | {数値} |
| テスト作成 | {数値} |
| デバッグ/修正 | {数値} |
| レポート作成 | {数値} |
| **合計** | **{合計}** |

### タスクバジェットとの比較

- **タスクの max_tokens**: {budget.max_tokens の値}
- **推定使用量**: {合計値}
- **余裕度**: {残りの割合}%

### 時間見積もり（参考）

- **推定所要時間**: {概算の所要時間}
- **クリティカルパス**: {最も時間がかかる部分}

---

## 5. 受け入れ条件の検証計画

各受け入れ条件に対して、具体的な検証方法を定義します。

### 検証手順

| 受け入れ条件 | 検証方法 | 合格基準 |
|---|---|---|
| {acceptance[0]} | {コマンドまたは手順} | {具体的な合格基準} |
| {acceptance[1]} | {コマンドまたは手順} | {具体的な合格基準} |
| {acceptance[2]} | {コマンドまたは手順} | {具体的な合格基準} |

### 検証コマンド

```bash
# テスト実行
{npm test / pytest / go test ./... 等}

# リンタ実行
{npm run lint / flake8 / golangci-lint 等}

# 型チェック
{npx tsc --noEmit / mypy 等}

# その他の検証
{プロジェクト固有の検証コマンド}
```

### エッジケースの考慮

- {考慮すべきエッジケース1}
- {考慮すべきエッジケース2}
- {考慮すべきエッジケース3}

---

## 6. リスクと緩和策

| リスク | 影響度 | 緩和策 |
|---|---|---|
| {リスク1} | 高/中/低 | {具体的な対策} |
| {リスク2} | 高/中/低 | {具体的な対策} |

---

## 7. 補足事項

{その他の注意事項、coordinator に伝えておくべき情報があれば記載}

- {補足1}
- {補足2}

---

## coordinator への確認事項（あれば）

以下の点について coordinator の判断を求めます：

1. {質問や確認事項1}
2. {質問や確認事項2}

---

*このPlanの承認後、Standard Mode に移行して実装を開始します。*
*承認: coordinator が ExitPlanMode を実行*
*差し戻し: coordinator が修正要求を SendMessage で返却*
